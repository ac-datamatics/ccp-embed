<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<script type="text/javascript"
		src="https://unpkg.com/amazon-connect-streams@2.1.1/release/connect-streams-min.js"></script>
</head>
<!-- Add the call to init() as an onload so it will only run once the page is loaded -->

<body>
	<h1>Testing</h1>
	<div id="ccp" style="width: 400px; height: 400px;"></div>


	<script src="./aws-connect-listener.js"></script>
	<script type="text/javascript">
		// initialize the streams api
		const connectListener = new ConnectListener(document.getElementById("ccp"), "https://ac-datamatics.my.connect.aws/ccp-v2");


		connectListener.onCallConnectingOrIncoming = (contact) => {
			alert("You have an incoming call ☎️");
		}
		connectListener.onCallMissed = () => {
			alert("Missed call 📞")
		}
		connectListener.onCallConnected = (contact) => {
			const connection = contact.getAgentConnection();
			alert("Connected to call. ID of connection is " + connection.getConnectionId());
		}
		connectListener.onCallError = () => {
			alert("error");
		}

		connectListener.onCallPending = () => {
			alert("Pending")
		}
		
		connectListener.onCallEnded = () => {
			alert("Ended")
		}
		connectListener.onCallDestroy = () => {
			alert("Call is destroyed");
		}
		connectListener.onCallACW = () => {
			alert("ACW");
		}
	</script>
</body>

</html>